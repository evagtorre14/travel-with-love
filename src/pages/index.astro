---
import MainLayout from '../layouts/MainLayout.astro';
import { Plane, Bed, Bus, Footprints, Mountain, Landmark, Castle, Camera, Moon, Church, Bike, Backpack, Sandwich, Droplets, Eye, CarFront, Star, Ship, Waves, Sun, Search, Sailboat, ChevronRight, Wifi, Shield, Lock, Flag, Heart } from 'lucide-astro';
import Hero from '../components/Hero.astro';
import Itinerary from '../components/Itinerary.astro'
import Destinations from '../components/Destinations.astro';
import Activities from '../components/Activities.astro';
import DestinationDetails from '../components/DestinationDetails.astro';
import Accommodation from '../components/Accommodation.astro';
import Restaurants from '../components/Restaurants.astro';
import Flavors from '../components/Flavors.astro';
import Culture from '../components/Culture.astro';
import Info from '../components/Info.astro';

// Importamos las imágenes
import heroImage from '../assets/theth_albania.jpg';
import karaburunImage from '../assets/karaburun.jpeg';
import taveKosiImage from '../assets/tave_kosi.jpg';
import byrekImage from '../assets/byrek.jpeg';
import fergeseImage from '../assets/fergese.jpg';
import qofteImage from '../assets/qofte.webp';
import specaImage from '../assets/speca.webp';
import qifqiImage from '../assets/qifqi.jpg';
import trileceImage from '../assets/trilece.jpg';
import kadaifImage from '../assets/kadaif.jpg';
import vinoImage from '../assets/vino.jpg';
import kayak3Image from '../assets/kayak3.jpg';
import blueEyeImage from '../assets/blue_eye.jpg';
import Activity from '../components/Activity.astro';
import WeatherSection from '../components/WeatherSection.astro';
import { imageConfig } from 'astro:assets';
---

<MainLayout 
	title="TravelWithLove | Tu Aventura en Albania Comienza Aquí"
	description="Planifica el viaje de tus sueños a Albania. Descubre itinerarios, playas vírgenes, montañas majestuosas y una cultura vibrante. Tu guía completa de viaje a Albania está aquí."
>
	<Hero image={heroImage} />

	<Itinerary />

	<Destinations />

	<DestinationDetails />

	<Activities />

	<Accommodation />

	<Restaurants />

	<Flavors />

	<Culture />

	<Info />

	<section id="weather" class="py-20 px-4 bg-slate-50">
		<h2 class="text-4xl font-sans font-semibold text-center text-slate-gray mb-12">El Tiempo en Nuestros Destinos</h2>
		<div class="max-w-6xl mx-auto">
			<WeatherSection />
		</div>
	</section>
</MainLayout>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		const cards = document.querySelectorAll('.destination-card');
		const detailsSections = document.querySelectorAll('.destination-details');
		const destinationLinks = document.querySelectorAll('[data-destination-link]');

		const openDetailsSection = (targetId) => {
			const targetSection = document.getElementById(targetId);
			if (!targetSection) return;

			// Ocultar todas las demás secciones de detalles
			detailsSections.forEach(section => {
				if (section.id !== targetId) {
					section.classList.add('hidden');
				}
			});

			// Mostrar la sección objetivo y hacer scroll
			targetSection.classList.remove('hidden');
			targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
		};

		cards.forEach(card => {
			card.addEventListener('click', () => {
				const targetId = card.getAttribute('data-target');
				openDetailsSection(targetId);
			});
		});

		destinationLinks.forEach(link => {
			link.addEventListener('click', (e) => {
				e.preventDefault();
				const targetId = link.getAttribute('data-destination-link');
				openDetailsSection(targetId);
			});
		});

        const setupAccordion = (containerSelector, rotation = '180deg') => {
            document.querySelectorAll(`${containerSelector} .accordion-header`).forEach(button => {
                button.addEventListener('click', () => {
                    const accordionContent = button.nextElementSibling as HTMLElement;
                    const accordionIcon = button.querySelector('svg') as SVGSVGElement;

                    if (accordionContent && accordionIcon) {
                        button.classList.toggle('active');

                        if (button.classList.contains('active')) {
                            accordionContent.style.maxHeight = accordionContent.scrollHeight + 'px';
                            accordionIcon.style.transform = `rotate(${rotation})`;
                        } else {
                            accordionContent.style.maxHeight = '0px';
                            accordionIcon.style.transform = 'rotate(0deg)';
                        }
                    }
                });
            });
        };

        setupAccordion('#info-accordion', '90deg');
        setupAccordion('#restaurants-accordion');
        setupAccordion('#accommodation-accordion');
        setupAccordion('#culture-accordion');
	});
</script>